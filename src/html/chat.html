<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Odysee Chatter Bot</title>
		<link rel="stylesheet" href="http://localhost:4187/files/css/index.css">
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
		
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script src='http://localhost:4187/files/js/render.js'></script>
		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<script src='http://localhost:4187/files/js/languages.js'></script>
		<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

        <script src="http://localhost:4187/files/socket.io/socket.io.js"></script>
        <script>
            var socket = io("http://localhost:4187");
            socket.on('addComment', (event) => {
                const message = document.getElementById("messageContainer");

                const url = event.channel;
                const url_odysee = url.split("lbry://")
                const url_odysee_complete = `https://odysee.com/${url_odysee[1]}`;

				if(event.alert == "tip"){
					if(event.tip_currency == "LBC"){
						message.innerHTML += `<div id="comment"><span id="time">${event.time}</span> · Tip detected: <a id="user" href="${url_odysee_complete}">${event.username}</a> tipped ${event.tip} ${event.tip_currency}!</div>`;
					}
					else if(event.tip_currency == "USD"){
						message.innerHTML += `<div id="comment"><span id="time">${event.time}</span> · Tip detected: <a id="user" href="${url_odysee_complete}">${event.username}</a> tipped $${event.tip} ${event.tip_currency}!</div>`;
					}
				}
                if(event.user == "streamer"){
					const streamerImage = `
                        <svg size="16" class="icon icon--BadgeStreamer" aria-hidden="true" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="15" height="15" viewBox="-1182 401 24 24" xml:space="preserve">
                            <style type="text/css">.st0{fill:#FF5490}.st1{fill:#81BBB9}.st2{fill:#2E2A2F}.st3{fill:#FFFFFF}</style>
                            <path class="st0" d="M-1169.8,406.4c-4.3,0-7.8,3.5-7.8,7.8c0,0.4,0,0.8,0.1,1.1h1c-0.1-0.4-0.1-0.7-0.1-1.1c0-3.7,3-6.8,6.8-6.8 s6.8,3,6.8,6.8c0,0.4,0,0.8-0.1,1.1h1c0.1-0.4,0.1-0.7,0.1-1.1C-1162.1,409.9-1165.5,406.4-1169.8,406.4z"></path>
                            <path class="st0" d="M-1180,414.2c0-5.6,4.6-10.2,10.2-10.2c5.6,0,10.2,4.6,10.2,10.2c0,2.2-0.7,4.3-1.9,5.9l0.8,0.6 c1.3-1.8,2.1-4.1,2.1-6.5c0-6.2-5-11.2-11.2-11.2c-6.2,0-11.2,5-11.2,11.2c0,2.1,0.6,4.1,1.6,5.8l1-0.3 C-1179.4,418-1180,416.2-1180,414.2z"></path>
                            <path class="st1" d="M-1163.7,419.4"></path>
                            <path class="st1" d="M-1165.6,418.5c0-0.1,0-3.6,0-3.6c0-1.9-1-4.3-4.4-4.3s-4.4,2.4-4.4,4.3c0,0,0,3.6,0,3.6 c-1.4,0.2-1.8,0.7-1.8,0.7s2.2,2.7,6.2,2.7s6.2-2.7,6.2-2.7S-1164.2,418.7-1165.6,418.5z"></path>
                            <path class="st2" d="M-1169.2,418.5h-1.5c-1.7,0-3.1-0.6-3.1-2.2v-1.9c0-2.1,1.6-3,3.9-3s3.9,0.9,3.9,3v1.9 C-1166.1,417.8-1167.5,418.5-1169.2,418.5z"></path>
                            <path class="st3" d="M-1167.8,416.2c-0.2,0-0.4-0.2-0.4-0.4v-1.1c0-0.2,0-1-1.2-1c-0.2,0-0.4-0.2-0.4-0.4s0.2-0.4,0.4-0.4 c1.2,0,2,0.6,2,1.7v1.1C-1167.4,416.1-1167.6,416.2-1167.8,416.2z"></path>
                        </svg>`;
                    message.innerHTML += `<div id="comment"><span id="time">${event.time}</span> · <a id="streamer" href="${url_odysee_complete}">${streamerImage} ${event.username}</a>: ${event.message}</div>`;
                }
                else if(event.user == "moderator"){
                    message.innerHTML += `<div id="comment"><span id="time">${event.time}</span> · <a id="moderator" href="${url_odysee_complete}">Moderator ${event.username}</a>: ${event.message}</div>`;
                }
                else if(event.user == "user"){
                    message.innerHTML += `<div id="comment"><span id="time">${event.time}</span> · <a id="user" href="${url_odysee_complete}">${event.username}</a>: ${event.message}</div>`;
                }

				const tutorialMessage = document.getElementById("tutorial");
				if(tutorialMessage) {
					tutorialMessage.remove();
				}
            });
        </script>
	</head>
	<body onload="readChatHistory(), ReadChatPage_Language()">
        <nav class="navbar">
			<div class="navbar-collapse collapse">
				<ul class="navbar-nav">
					<li class="nav-item">
						<button id="navbar-commands" type="button" class="nav-link" onclick="OnClick('commands')">Commands</button>
					</li>
					<li class="nav-item">
					  	<button id="navbar-chat" type="button" class="nav-link" onclick="OnClick('chat')">Chat</button>
				 	</li>

				  	<li class="nav-item name">
					  	<button id="navbar-odyseechatterbot" type="button" class="nav-link" onclick="OnClick('odysee chatter bot')">Odysee Chatter Bot</button>
				  	</li>
				  	<li class="nav-item settings">
					  	<button id="navbar-settings" type="button" class="nav-link" onclick="OnClick('settings')">Settings</button>
				  	</li>

				  	<li class="nav-item lbc">
					  	<button id="navbar-lbc" type="button" class="nav-link" onclick="OnClick('lbc')">Donate LBC</button>
				  	</li>
				  	<li class="nav-item bmac">
					  	<button id="navbar-bmac" type="button" class="nav-link" onclick="OnClick('bmac')">Buy me a coffee</button>
				  	</li>
				  	<li class="nav-item logout">
					  	<button id="navbar-logout" type="button" class="nav-link" onclick="OnClick('logout')">Logout</button>
				  	</li>
				</ul>
			</div>
  		</nav>
		<div id="messageContainer" class="messageContainer" style="margin-top: -10px;">
            
			<div id="tutorial">
				<div id="comment"><span id="time">00.00 PM</span> · <a id="streamer" href="https://www.odysee.com/@GG2015#b8fbd24ab4644148cfed022732c48677cf662047">Streamer GG2015</a>: This is where chat appears. This message will disappear after your first chat message.</div>
			</div>
        </div>
	</body>
</html>
